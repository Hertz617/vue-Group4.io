import{_ as f,d as b,o as _,h as C,i as d,a as t,w as a,F as I,g as V,j as B,k as w,b as p,l as E,e as R,f as F,E as T}from"./index-1ed31e3c.js";import{E as k,a as P}from"./el-select-d613de18.js";import{b as $}from"./copyRight-bc72508b.js";import{c as v}from"./major-2a6a6561.js";/* empty css                   */import{c as z}from"./cloneDeep-d951e9a5.js";const N=b({data(){return{searchText:"",currentCtrl:0,copyrights:[],copyright:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,copyRight:{attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:0},formLabelWidth:100}},mounted(){this.getcopyRightsPage(1)},methods:{toEdit(e){this.dialogFormVisible=!0,this.copyRight=z(e)},getcopyRightsPage(e){$({current:e,size:4}).then(i=>{const l=i.data.page;this.copyrights=l.records,this.page=l}).catch(i=>{console.log(i)})},selectById(){this.dialogFormVisibleById=!0},refresh(){this.getcopyRightsPage(1),this.currentCtrl=0},getCopyRightsById(e){this.currentCtrl=1,v({id:e}).then(i=>{this.dialogFormVisibleById=!1;const l=i.data;this.copyrights=l.copyrights,this.page=l}).catch(i=>{k("查询失败，没有该著作权"),this.refresh()})},currentchange(e){this.currentCtrl==0?(this.getcopyRightsPage(e),this.page.current=e):(this.getCopyRightsById(this.searchText),this.page.current=e)}}}),D={class:"copyrights"},U={class:"copyRight-tools"},j={class:"dialog-footer"};function L(e,o,i,l,M,W){const n=V,s=E,h=B,g=P,c=R,m=F,u=T,y=w;return _(),C(I,null,[d("div",D,[d("div",U,[t(n,{type:"warning",onClick:e.selectById},{default:a(()=>[p("按著作权人ID查询数据")]),_:1},8,["onClick"]),t(n,{type:"warning",onClick:e.refresh},{default:a(()=>[p("刷新查询")]),_:1},8,["onClick"])]),t(h,{data:e.copyrights,style:{width:"100%"}},{default:a(()=>[t(s,{fixed:"",prop:"id",label:"编号",width:"100"}),t(s,{prop:"name",label:"著作权名称",width:"140"}),t(s,{prop:"userId",label:"著作权人：第一位",width:"140"}),t(s,{prop:"finishTime",label:"完成时间",width:"140"}),t(s,{prop:"publishTime",label:"首次发表时间",width:"140"}),t(s,{prop:"attachment",label:"佐证材料",width:"160"}),t(s,{prop:"copyrightNo",label:"著作权编号",width:"140"})]),_:1},8,["data"]),t(g,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(y,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":o[3]||(o[3]=r=>e.dialogFormVisibleById=r),title:"著作权信息查询"},{footer:a(()=>[d("span",j,[t(n,{onClick:o[1]||(o[1]=r=>e.dialogFormVisibleById=!1)},{default:a(()=>[p("Cancel")]),_:1}),t(n,{type:"primary",onClick:o[2]||(o[2]=r=>e.getCopyRightsById(e.searchText))},{default:a(()=>[p("查询 ")]),_:1})])]),default:a(()=>[t(u,{model:e.copyright},{default:a(()=>[t(m,{label:"著作权人编号","label-width":140},{default:a(()=>[t(c,{modelValue:e.searchText,"onUpdate:modelValue":o[0]||(o[0]=r=>e.searchText=r),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const O=f(N,[["render",L]]);export{O as default};
