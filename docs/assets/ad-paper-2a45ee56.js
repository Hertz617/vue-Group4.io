import{_ as y,d as V,o as I,h as C,i as d,a,w as l,F as B,g as P,j as w,k as F,b as n,l as _,e as U,f as k,E}from"./index-1ed31e3c.js";import{E as f,a as T}from"./el-select-d613de18.js";import{P as $,G as v,g as L}from"./paper-6e105f47.js";/* empty css                   */const z=V({data(){return{papers:[],paper:[],pi:[],searchText:"",userId:"",fileList:"",currentCtrl:0,page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,dialogFormVisibleByUserId:!1,Paper:{attachment:"",count:0,id:0,name:"",publication:"",publicationCate:"",publishTime:"",type:"",userId:0},formLabelWidth:80}},mounted(){this.getPaperPage(1)},methods:{refresh(){this.getPaperPage(1),this.currentCtrl=0},getPaperPage(e){$({current:e,size:4}).then(o=>{console.log(o);const r=o.data.page;this.papers=r.records,this.page=r}).catch(o=>{console.log(o)})},currentchange(e){this.currentCtrl==0?(console.log("0"),this.getPaperPage(e),this.page.current=e):this.currentCtrl==1?(console.log("1"),this.getPapers(this.fileList),this.page.current=e):(console.log("2"),console.log(e),this.getPaperById(this.searchText),this.page.current=e)},getPaperById(e){console.log(e),this.paper=[],v({id:e}).then(o=>{this.dialogFormVisibleById=!1,this.paper.push(o.data.paper);const r=this.paper;this.papers=r,this.page=o.data}).catch(o=>{f("没有查询到该论文")})},getPapers(e){this.papers=[],L({id:e}).then(o=>{if(this.dialogFormVisibleByUserId=!1,o.success){const r=o.data;this.papers=r.papers,this.page=r}else f("没有查询到该作者"),this.refresh()})},searchById(){this.currentCtrl=2,this.dialogFormVisibleById=!0},searchByUserId(){this.currentCtrl=1,this.dialogFormVisibleByUserId=!0}}}),D={class:"head"},N={class:"Paper-tools"},W={class:"dialog-footer"},G={class:"dialog-footer"};function j(e,t,o,r,M,O){const p=P,i=_,b=w,c=T,m=U,u=k,g=E,h=F;return I(),C(B,null,[d("div",D,[d("div",N,[a(p,{type:"warning",onClick:e.searchById},{default:l(()=>[n("根据论文编号搜索")]),_:1},8,["onClick"]),a(p,{type:"warning",onClick:e.searchByUserId},{default:l(()=>[n("根据作者编号查询")]),_:1},8,["onClick"]),a(p,{type:"warning",onClick:t[0]||(t[0]=s=>e.refresh())},{default:l(()=>[n("刷新查询")]),_:1})]),a(b,{data:e.papers,style:{width:"100%"}},{default:l(()=>[a(i,{fixed:"",prop:"id",label:"论文编号",width:"80"}),a(i,{prop:"name",label:"论文题目",width:"120"}),a(i,{prop:"publication",label:"刊物",width:"120"}),a(i,{prop:"publicationCate",label:"刊物种类",width:"120"}),a(i,{prop:"publishTime",label:"发表时间",width:"120"}),a(i,{prop:"type",label:"论文类型",width:"120"}),a(i,{prop:"userId",label:"作者编号",width:"120"}),a(i,{prop:"attachment",label:"佐证材料",width:"120"}),a(i,{prop:"count",label:"引用次数",width:"120"})]),_:1},8,["data"]),a(c,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),a(h,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":t[4]||(t[4]=s=>e.dialogFormVisibleById=s),title:"根据论文编号查询"},{footer:l(()=>[d("span",W,[a(p,{onClick:t[2]||(t[2]=s=>e.dialogFormVisibleById=!1)},{default:l(()=>[n("Cancel")]),_:1}),a(p,{type:"primary",onClick:t[3]||(t[3]=s=>e.getPaperById(e.searchText))},{default:l(()=>[n("查询 ")]),_:1})])]),default:l(()=>[a(g,{model:e.paper},{default:l(()=>[a(u,{label:"请输入论文编号","label-width":e.formLabelWidth},{default:l(()=>[a(m,{modelValue:e.searchText,"onUpdate:modelValue":t[1]||(t[1]=s=>e.searchText=s),placeholder:"请输入论文ID",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(h,{modelValue:e.dialogFormVisibleByUserId,"onUpdate:modelValue":t[8]||(t[8]=s=>e.dialogFormVisibleByUserId=s),title:"根据作者编号查询"},{footer:l(()=>[d("span",G,[a(p,{onClick:t[6]||(t[6]=s=>e.dialogFormVisibleByUserId=!1)},{default:l(()=>[n("Cancel")]),_:1}),a(p,{type:"primary",onClick:t[7]||(t[7]=s=>e.getPapers(e.fileList))},{default:l(()=>[n("查询 ")]),_:1})])]),default:l(()=>[a(g,{model:e.paper},{default:l(()=>[a(u,{label:"请输入作者编号","label-width":e.formLabelWidth},{default:l(()=>[a(m,{modelValue:e.fileList,"onUpdate:modelValue":t[5]||(t[5]=s=>e.fileList=s),placeholder:"请输入作者ID",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const K=y(z,[["render",j]]);export{K as default};
