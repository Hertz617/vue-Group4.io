import{H as pe,K as me,aD as b,aW as ne,bm as B,bn as C,aS as E,d as D,L as he,M as fe,P as be,az as ve,N as _e,T as k,ai as A,X as Ne,bo as Ve,Q as ge,ac as ye,bp as Ie,o as f,h as g,af as q,Y as s,a0 as W,al as F,a as y,w as G,c as w,ah as ke,bq as Ee,q as Q,a4 as X,ag as we,br as Ce,a2 as T,e as Se,a9 as $e,bs as Pe,aT as xe,S as J,aE as Ae,_ as ae,F as Z,ad as Fe,i as h,a6 as ee,b as Y,bj as Te,bt as Be,g as De,bh as ze,bi as Me,r as Ue}from"./index-1ed31e3c.js";import{v as te}from"./index-f4cb1fd9.js";const Ke=pe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:me,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||b(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),Oe={[ne]:(t,r)=>r!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[B]:t=>b(t)||C(t),[E]:t=>b(t)||C(t)},Le=["aria-label","onKeydown"],We=["aria-label","onKeydown"],Ye=D({name:"ElInputNumber"}),qe=D({...Ye,props:Ke,emits:Oe,setup(t,{expose:r,emit:a}){const l=t,{t:S}=he(),m=fe("input-number"),v=be(),i=ve({currentValue:l.modelValue,userInput:null}),{formItem:V}=_e(),u=k(()=>b(l.modelValue)&&l.modelValue<=l.min),_=k(()=>b(l.modelValue)&&l.modelValue>=l.max),le=k(()=>{const e=R(l.step);return A(l.precision)?Math.max(R(l.modelValue),e):(e>l.precision,l.precision)}),z=k(()=>l.controls&&l.controlsPosition==="right"),H=Ne(),I=Ve(),M=k(()=>{if(i.userInput!==null)return i.userInput;let e=i.currentValue;if(C(e))return"";if(b(e)){if(Number.isNaN(e))return"";A(l.precision)||(e=e.toFixed(l.precision))}return e}),U=(e,n)=>{if(A(n)&&(n=le.value),n===0)return Math.round(e);let o=String(e);const c=o.indexOf(".");if(c===-1||!o.replace(".","").split("")[c+n])return e;const P=o.length;return o.charAt(P-1)==="5"&&(o=`${o.slice(0,Math.max(0,P-1))}6`),Number.parseFloat(Number(o).toFixed(n))},R=e=>{if(C(e))return 0;const n=e.toString(),o=n.indexOf(".");let c=0;return o!==-1&&(c=n.length-o-1),c},j=(e,n=1)=>b(e)?U(e+l.step*n):i.currentValue,K=()=>{if(l.readonly||I.value||_.value)return;const e=Number(M.value)||0,n=j(e);$(n),a(B,i.currentValue)},O=()=>{if(l.readonly||I.value||u.value)return;const e=Number(M.value)||0,n=j(e,-1);$(n),a(B,i.currentValue)},L=(e,n)=>{const{max:o,min:c,step:d,precision:N,stepStrictly:P,valueOnClear:x}=l;o<c&&Pe("InputNumber","min should not be greater than max.");let p=Number(e);if(C(e)||Number.isNaN(p))return null;if(e===""){if(x===null)return null;p=xe(x)?{min:c,max:o}[x]:x}return P&&(p=U(Math.round(p/d)*d,N)),A(N)||(p=U(p,N)),(p>o||p<c)&&(p=p>o?o:c,n&&a(E,p)),p},$=(e,n=!0)=>{var o;const c=i.currentValue,d=L(e);if(!n){a(E,d);return}c!==d&&(i.userInput=null,a(E,d),a(ne,d,c),l.validateEvent&&((o=V==null?void 0:V.validate)==null||o.call(V,"change").catch(N=>J())),i.currentValue=d)},oe=e=>{i.userInput=e;const n=e===""?null:Number(e);a(B,n),$(n,!1)},re=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&$(n),i.userInput=null},ue=()=>{var e,n;(n=(e=v.value)==null?void 0:e.focus)==null||n.call(e)},ie=()=>{var e,n;(n=(e=v.value)==null?void 0:e.blur)==null||n.call(e)},ce=e=>{a("focus",e)},de=e=>{var n;a("blur",e),l.validateEvent&&((n=V==null?void 0:V.validate)==null||n.call(V,"blur").catch(o=>J()))};return ge(()=>l.modelValue,e=>{const n=L(i.userInput),o=L(e,!0);!b(n)&&(!n||n!==o)&&(i.currentValue=o,i.userInput=null)},{immediate:!0}),ye(()=>{var e;const{min:n,max:o,modelValue:c}=l,d=(e=v.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(o)?d.setAttribute("aria-valuemax",String(o)):d.removeAttribute("aria-valuemax"),Number.isFinite(n)?d.setAttribute("aria-valuemin",String(n)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",String(i.currentValue)),d.setAttribute("aria-disabled",String(I.value)),!b(c)&&c!=null){let N=Number(c);Number.isNaN(N)&&(N=null),a(E,N)}}),Ie(()=>{var e;const n=(e=v.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${i.currentValue}`)}),r({focus:ue,blur:ie}),(e,n)=>(f(),g("div",{class:W([s(m).b(),s(m).m(s(H)),s(m).is("disabled",s(I)),s(m).is("without-controls",!e.controls),s(m).is("controls-right",s(z))]),onDragstart:n[1]||(n[1]=T(()=>{},["prevent"]))},[e.controls?q((f(),g("span",{key:0,role:"button","aria-label":s(S)("el.inputNumber.decrease"),class:W([s(m).e("decrease"),s(m).is("disabled",s(u))]),onKeydown:F(O,["enter"])},[y(s(Q),null,{default:G(()=>[s(z)?(f(),w(s(ke),{key:0})):(f(),w(s(Ee),{key:1}))]),_:1})],42,Le)),[[s(te),O]]):X("v-if",!0),e.controls?q((f(),g("span",{key:1,role:"button","aria-label":s(S)("el.inputNumber.increase"),class:W([s(m).e("increase"),s(m).is("disabled",s(_))]),onKeydown:F(K,["enter"])},[y(s(Q),null,{default:G(()=>[s(z)?(f(),w(s(we),{key:0})):(f(),w(s(Ce),{key:1}))]),_:1})],42,We)),[[s(te),K]]):X("v-if",!0),y(s(Se),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":s(M),placeholder:e.placeholder,readonly:e.readonly,disabled:s(I),size:s(H),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=T(()=>{},["prevent"])),onKeydown:[F(T(K,["prevent"]),["up"]),F(T(O,["prevent"]),["down"])],onBlur:de,onFocus:ce,onInput:oe,onChange:re},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Ge=$e(qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const He=Ae(Ge);const Re=D({data(){return{products:[{id:1001,name:"海尔立式热水器",price:1849,count:1},{id:1002,name:"Vue核心技术解析",price:43,count:1}],allcheck:!1}},computed:{total(){let t=0;return this.products.forEach(r=>{r.ischeck&&(t+=r.price*r.count)}),t}},methods:{selectProducts(t,r){this.all(),r?this.products.forEach(a=>{a.id==t&&(this.total+=a.price*a.count)}):this.products.forEach(a=>{a.id==t&&(this.total-=a.price*a.count)})},handleChange(t,r){if(this.products.length===0){this.total=0;return}this.total=0,this.$nextTick(()=>{this.products.forEach(a=>{a.count||(a.count=1),this.total+=a.price*a.count})})},changeAll(){this.allcheck=!this.allcheck,this.products.forEach(t=>{t.ischeck=this.allcheck}),this.allcheck?(this.total=0,this.products.forEach(t=>{this.total+=t.price*t.count})):this.total=0},all(){this.products.findIndex(r=>!r.ischeck)==-1?this.allcheck=!0:this.allcheck=!1},handleDelete(t,r){let a=this.products.findIndex(l=>l.id===t);a!==-1&&(r&&(this.total-=this.products[a].price*this.products[a].count),this.products.splice(a,1))}}}),se=t=>(ze("data-v-bfc1113b"),t=t(),Me(),t),je=se(()=>h("div",{class:"cart"},"购物车",-1)),Qe={class:"product"},Xe={class:"name"},Je={class:"bars"},Ze={class:"price"},et={class:"count"},tt=se(()=>h("button",null,"购买",-1));function nt(t,r,a,l,S,m){const v=Be,i=He,V=De;return f(),g(Z,null,[je,(f(!0),g(Z,null,Fe(t.products,u=>(f(),g("div",{class:"products",key:u.id},[h("div",Qe,[h("div",Xe,[y(v,{label:u.name,modelValue:u.ischeck,"onUpdate:modelValue":_=>u.ischeck=_,size:"small",onChange:_=>t.selectProducts(u.id,u.ischeck)},null,8,["label","modelValue","onUpdate:modelValue","onChange"])]),h("div",Je,[h("span",Ze,"￥"+ee(u.price),1),h("span",et,[y(i,{modelValue:u.count,"onUpdate:modelValue":_=>u.count=_,min:1,max:9999,onChange:_=>t.handleChange(u.id,u.count)},null,8,["modelValue","onUpdate:modelValue","onChange"]),y(V,{size:"small",type:"danger",onClick:_=>t.handleDelete(u.id,u.ischeck)},{default:G(()=>[Y(" 删除")]),_:2},1032,["onClick"])])])])]))),128)),Y(" 全选"),q(h("input",{type:"checkbox",onClick:r[0]||(r[0]=(...u)=>t.changeAll&&t.changeAll(...u)),"onUpdate:modelValue":r[1]||(r[1]=u=>t.allcheck=u)},null,512),[[Te,t.allcheck]]),h("div",null,[h("span",null,[Y("合计：￥ "),h("span",null,ee(t.total),1)]),tt])],64)}const at=ae(Re,[["render",nt],["__scopeId","data-v-bfc1113b"]]);const st=D({data(){return{}},methods:{},components:{Cart:at}});function lt(t,r,a,l,S,m){const v=Ue("Cart",!0);return f(),w(v)}const ut=ae(st,[["render",lt],["__scopeId","data-v-c11e0afd"]]);export{ut as default};
