import{_ as I,d as V,o as R,h as w,i as g,a as t,w as a,F as C,g as E,j as _,k,b as m,l as F,e as B,f as T,E as U}from"./index-1ed31e3c.js";import{E as z}from"./el-date-picker-c767ab16.js";import{E as s,a as D}from"./el-select-d613de18.js";import{c as N,a as v}from"./copyRight-bc72508b.js";import{c as L}from"./major-2a6a6561.js";/* empty css                   */import{c as S}from"./cloneDeep-d951e9a5.js";import"./index-f4cb1fd9.js";const W=V({data(){return{searchText:"",copyrights:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,copyRight:{attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:parseInt(localStorage.getItem("UserID"))},formLabelWidth:100}},mounted(){this.getCopyRightsById(parseInt(localStorage.getItem("UserID")))},methods:{toEdit(e){this.dialogFormVisible=!0,this.copyRight=S(e)},currentchange(e){this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),this.page.current=e},toAdd(){this.dialogFormVisible=!0,this.copyRight={attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:parseInt(localStorage.getItem("UserID"))}},selectById(){this.dialogFormVisibleById=!0},getCopyRightsById(e){L({id:e}).then(d=>{console.log(d),this.dialogFormVisibleById=!1;const r=d.data;console.log(r.copyrights),this.copyrights=r.copyrights,this.page=r,console.log(this.page)}).catch(d=>{s("您尚未上传著作权"),console.log(d)})},save(){const e=this.copyRight;e.id==0?N(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),s(o.msg);else return s(o.msg),!1}).catch(o=>{s("网络错误联系管理员")}):v(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getCopyRightsById(parseInt(localStorage.getItem("UserID"))),s(o.msg);else return s(o.msg),!1}).catch(o=>{s("网络错误联系管理员")})}}}),$={class:"copyrights"},P={class:"copyRight-tools"},A={class:"dialog-footer"};function j(e,o,d,r,M,q){const p=E,i=F,c=_,f=D,h=B,n=T,u=z,y=U,b=k;return R(),w(C,null,[g("div",$,[g("div",P,[t(p,{type:"warning",onClick:e.toAdd},{default:a(()=>[m("添加")]),_:1},8,["onClick"])]),t(c,{data:e.copyrights,style:{width:"100%"}},{default:a(()=>[t(i,{fixed:"",prop:"id",label:"编号",width:"100"}),t(i,{prop:"name",label:"著作权名称",width:"140"}),t(i,{prop:"userId",label:"著作权人：第一位",width:"140"}),t(i,{prop:"finishTime",label:"完成时间",width:"140"}),t(i,{prop:"publishTime",label:"首次发表时间",width:"140"}),t(i,{prop:"attachment",label:"佐证材料",width:"160"}),t(i,{prop:"copyrightNo",label:"著作权编号",width:"140"}),t(i,{fixed:"right",label:"操作",width:"120"},{default:a(l=>[t(p,{link:"",type:"primary",size:"small",onClick:G=>e.toEdit(l.row)},{default:a(()=>[m("更新")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),t(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[6]||(o[6]=l=>e.dialogFormVisible=l),title:"著作权信息编辑"},{footer:a(()=>[g("span",A,[t(p,{onClick:o[5]||(o[5]=l=>e.dialogFormVisible=!1)},{default:a(()=>[m("Cancel")]),_:1}),t(p,{type:"primary",onClick:e.save},{default:a(()=>[m("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[t(y,{model:e.copyRight},{default:a(()=>[t(n,{label:"著作权名称","label-width":e.formLabelWidth},{default:a(()=>[t(h,{modelValue:e.copyRight.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.copyRight.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"完成时间","label-width":e.formLabelWidth},{default:a(()=>[t(u,{modelValue:e.copyRight.finishTime,"onUpdate:modelValue":o[1]||(o[1]=l=>e.copyRight.finishTime=l),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),t(n,{label:"首次发表时间","label-width":e.formLabelWidth},{default:a(()=>[t(u,{modelValue:e.copyRight.publishTime,"onUpdate:modelValue":o[2]||(o[2]=l=>e.copyRight.publishTime=l),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),t(n,{label:"佐证材料","label-width":e.formLabelWidth},{default:a(()=>[t(h,{modelValue:e.copyRight.attachment,"onUpdate:modelValue":o[3]||(o[3]=l=>e.copyRight.attachment=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"著作权编号","label-width":e.formLabelWidth},{default:a(()=>[t(h,{modelValue:e.copyRight.copyrightNo,"onUpdate:modelValue":o[4]||(o[4]=l=>e.copyRight.copyrightNo=l),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const x=I(W,[["render",j]]);export{x as default};
