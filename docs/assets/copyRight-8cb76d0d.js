import{_ as V,d as R,o as w,h as C,i as m,a as o,w as t,F as k,g as F,j as E,k as I,b as r,l as B,e as z,f as T,E as P}from"./index-1ed31e3c.js";import{E as N}from"./el-date-picker-c767ab16.js";import{E as d,a as U}from"./el-select-d613de18.js";import{b as v,d as L,c as W,a as $}from"./copyRight-bc72508b.js";/* empty css                   */import{c as _}from"./cloneDeep-d951e9a5.js";import"./index-f4cb1fd9.js";const A=R({data(){return{searchText:"",copyrights:[],copyright:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,dialogFormVisibleById:!1,copyRight:{attachment:"",copyrightNo:"",finishTime:"",id:0,name:"",publishTime:"",userId:0},formLabelWidth:100}},mounted(){this.getcopyRightsPage(1)},methods:{job(){post("api/copyright/one",{token:"",page:this.page,count:this.count,type:this.type}).then(e=>{console.log(e)}).catch(function(e){console.log("请求失败")})},toEdit(e){this.dialogFormVisible=!0,this.copyRight=_(e)},getcopyRightsPage(e){v({current:e,size:4}).then(a=>{console.log(a);const h=a.data.page;this.copyrights=h.records,this.page=h}).catch(a=>{console.log(a)})},currentchange(e){this.getcopyRightsPage(e),this.page.current=e},toAdd(){this.dialogFormVisible=!0},selectById(){this.dialogFormVisibleById=!0},getCopyRightsById(e){this.copyright=[],L({id:e}).then(a=>{this.dialogFormVisibleById=!1,console.log("错误信息"),console.log(a),this.copyright.push(a.data.copyright);const h=this.copyright;this.copyrights=h,d("查询成功")}).catch(a=>{d("查询失败，没有该专利"),console.log(a)})},refresh(){this.getcopyRightsPage(1)},save(){const e=this.copyRight;e.id==0?W(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getcopyRightsPage(this.page.current),d(l.msg);else return d(l.msg),!1}).catch(l=>{d("网络错误联系管理员")}):$(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getcopyRightsPage(this.page.current),d(l.msg);else return d(l.msg),!1}).catch(l=>{d("网络错误联系管理员")})}}}),D={class:"copyrights"},j={class:"copyRight-tools"},M={class:"dialog-footer"},q={class:"dialog-footer"};function G(e,l,a,h,H,J){const n=F,s=B,f=E,b=U,g=z,p=T,u=N,c=P,y=I;return w(),C(k,null,[m("div",D,[m("div",j,[o(n,{type:"warning",onClick:e.toAdd},{default:t(()=>[r("添加")]),_:1},8,["onClick"]),o(n,{type:"warning",onClick:e.selectById},{default:t(()=>[r("查找")]),_:1},8,["onClick"])]),o(f,{data:e.copyrights,style:{width:"100%"}},{default:t(()=>[o(s,{fixed:"",prop:"id",label:"编号",width:"100"}),o(s,{prop:"attachment",label:"佐证材料",width:"160"}),o(s,{prop:"copyrightNo",label:"著作权编号",width:"140"}),o(s,{prop:"finishTime",label:"完成时间",width:"140"}),o(s,{prop:"name",label:"著作权名称",width:"140"}),o(s,{prop:"publishTime",label:"首次发表时间",width:"140"}),o(s,{prop:"userId",label:"著作权人：第一位",width:"140"}),o(s,{fixed:"right",label:"操作",width:"120"},{default:t(i=>[o(n,{link:"",type:"primary",size:"small",onClick:K=>e.toEdit(i.row)},{default:t(()=>[r("更新")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(b,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(y,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[7]||(l[7]=i=>e.dialogFormVisible=i),title:"添加著作权信息"},{footer:t(()=>[m("span",M,[o(n,{onClick:l[6]||(l[6]=i=>e.dialogFormVisible=!1)},{default:t(()=>[r("Cancel")]),_:1}),o(n,{type:"primary",onClick:e.save},{default:t(()=>[r("保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[o(c,{model:e.copyRight},{default:t(()=>[o(p,{label:"著作权名称","label-width":e.formLabelWidth},{default:t(()=>[o(g,{modelValue:e.copyRight.name,"onUpdate:modelValue":l[0]||(l[0]=i=>e.copyRight.name=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(p,{label:"著作权人","label-width":e.formLabelWidth},{default:t(()=>[o(g,{modelValue:e.copyRight.userId,"onUpdate:modelValue":l[1]||(l[1]=i=>e.copyRight.userId=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(p,{label:"完成时间","label-width":e.formLabelWidth},{default:t(()=>[o(u,{modelValue:e.copyRight.finishTime,"onUpdate:modelValue":l[2]||(l[2]=i=>e.copyRight.finishTime=i),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),o(p,{label:"首次发表时间","label-width":e.formLabelWidth},{default:t(()=>[o(u,{modelValue:e.copyRight.publishTime,"onUpdate:modelValue":l[3]||(l[3]=i=>e.copyRight.publishTime=i),type:"date",placeholder:"Pick a day",size:e.size},null,8,["modelValue","size"])]),_:1},8,["label-width"]),o(p,{label:"佐证材料","label-width":e.formLabelWidth},{default:t(()=>[o(g,{modelValue:e.copyRight.attachment,"onUpdate:modelValue":l[4]||(l[4]=i=>e.copyRight.attachment=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(p,{label:"著作权编号","label-width":e.formLabelWidth},{default:t(()=>[o(g,{modelValue:e.copyRight.copyrightNo,"onUpdate:modelValue":l[5]||(l[5]=i=>e.copyRight.copyrightNo=i),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(y,{modelValue:e.dialogFormVisibleById,"onUpdate:modelValue":l[10]||(l[10]=i=>e.dialogFormVisibleById=i),title:"著作权信息查询"},{footer:t(()=>[m("span",q,[o(n,{onClick:l[9]||(l[9]=i=>e.dialogFormVisibleById=!1)},{default:t(()=>[r("Cancel")]),_:1}),o(n,{type:"primary",onClick:e.getCopyRightsById},{default:t(()=>[r("查询 ")]),_:1},8,["onClick"])])]),default:t(()=>[o(c,{model:e.copyright},{default:t(()=>[o(p,{label:"著作权编号","label-width":140},{default:t(()=>[o(g,{modelValue:e.copyRight.copyrightNo,"onUpdate:modelValue":l[8]||(l[8]=i=>e.copyRight.copyrightNo=i),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ee=V(A,[["render",G]]);export{ee as default};
