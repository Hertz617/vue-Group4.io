import{_ as c,d as g,m as F,o as _,c as h,w as t,u as b,E as k,a as r,b as f,e as y,f as w,g as E}from"./index-1ed31e3c.js";import{u as T}from"./index-d856e691.js";const V=g({setup(){},data(){return{userType:"",userForm:{email:"",password:""},rules:{email:[{required:!0,message:"请输入正确的电子邮箱",tirgger:"blur"},{type:"email",message:"电子邮箱格式错误",tirgger:"blur"}],password:[{required:!0,message:"请输入正确的用户密码",tirgger:"blur"},{min:8,message:"密码长度不得小于8",tirgger:"blur"}]}}},methods:{...F(b,["setToken","fillUserinfo"]),btnLogin(){const e=this,s=e.$refs.ruleFormRef;s&&s.validate(u=>{if(u)T(e.userForm).then(o=>{if(console.log(o.data.userinfo.userType),this.userType=o.data.userinfo.userType,o.success){const l=o.data.userinfo;e.setToken(l.token),e.fillUserinfo(l),o.data.userinfo.userType=="管理员"?this.$router.push({path:"/scienceAdmin"}):(this.$router.push({path:"/scienceClient"}),localStorage.setItem("UserID",o.data.userinfo.id))}else return!1}).catch(o=>{console.log(o)});else return console.log("error submit"),!1})},resetForm(){this.$refs.ruleFormRef.resetFields()}}});function $(e,s,u,p,o,l){const i=y,a=w,m=E,d=k;return _(),h(d,{ref:"ruleFormRef",model:e.userForm,"status-icon":"",rules:e.rules,class:"demo-ruleForm"},{default:t(()=>[r(a,{label:"用户邮箱",prop:"email"},{default:t(()=>[r(i,{modelValue:e.userForm.email,"onUpdate:modelValue":s[0]||(s[0]=n=>e.userForm.email=n),autocomplete:"off",placeholder:"请输入你的邮箱","suffix-icon":"Message"},null,8,["modelValue"])]),_:1}),r(a,{label:"用户密码",prop:"password"},{default:t(()=>[r(i,{type:"password",modelValue:e.userForm.password,"onUpdate:modelValue":s[1]||(s[1]=n=>e.userForm.password=n),autocomplete:"off",placeholder:"请输入你的密码","suffix-icon":"Lock"},null,8,["modelValue"])]),_:1}),r(a,null,{default:t(()=>[r(m,{type:"primary",onClick:e.btnLogin},{default:t(()=>[f("用户登录")]),_:1},8,["onClick"]),r(m,{onClick:e.resetForm},{default:t(()=>[f("重置")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}const I=c(V,[["render",$]]);export{I as default};
